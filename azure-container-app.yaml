apiVersion: 2022-03-01
location: eastus
name: dungeon-shopkeep-app
properties:
  managedEnvironmentId: /subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.App/managedEnvironments/{environment-name}
  configuration:
    ingress:
      external: true
      targetPort: 3000
      transport: http
      allowInsecure: false
    secrets: []
  template:
    containers:
    - image: {your-container-registry}.azurecr.io/dungeon-shopkeep:latest
      name: dungeon-shopkeep
      resources:
        cpu: 0.5
        memory: 1.0Gi
      env:
      - name: NODE_ENV
        value: production
    scale:
      minReplicas: 1
      maxReplicas: 3
      rules:
      - name: http-scale-rule
        http:
          metadata:
            concurrentRequests: '10'
tags: {}
type: Microsoft.App/containerApps
